{"version":3,"sources":["artists.js","database.js","filter.js","generator.js","lottery.js","modal.js","names.js","scheduler.js","screen.js","system-actions.js","main.js","tab-enter.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["/* globals Database */\r\n\r\n(function(scope) {\r\n  // Interface.\r\n  scope.Artists = {\r\n    addLottery: addLottery,\r\n    appendToday: appendToday,\r\n    clear: clearArtists,\r\n    delete: deleteArtistById,\r\n    get: getArtistById,\r\n    getAll: getAllArtists,\r\n    set: setArtist,\r\n    setAll: setAllArtists,\r\n    setSeated: setSeated,\r\n    setStandby: setStandby,\r\n    setSignedOut: setSignedOut\r\n  };\r\n\r\n  // Return a copy of the array with the element added, without duplications.\r\n  function addArrayEntry(arrayData, elementToAdd) {\r\n    if (Array.isArray(arrayData)) {\r\n      if (arrayData.indexOf(elementToAdd) < 0) {\r\n        return arrayData.concat(elementToAdd);\r\n      }\r\n      return arrayData.slice();\r\n    }\r\n    return [elementToAdd];\r\n  }\r\n\r\n  // Get the maximum value for a field name.\r\n  function getMaxFieldValue(artists, fieldName) {\r\n    return Math.max.apply(0, artists.map(function(a) {\r\n      return a[fieldName] || 0;\r\n    }));\r\n  }\r\n\r\n  // Get a copy of the array with today's day string added.\r\n  function appendToday(arr) {\r\n    return addArrayEntry(arr, getTodayString());\r\n  }\r\n\r\n  // Get today's day string.\r\n  function getTodayString() {\r\n    return moment().format('dddd');\r\n  }\r\n\r\n  // Get an artist by ID from a collection.\r\n  function getArtistFromArray(artists, id) {\r\n    return artists.find(function(artist) {\r\n        return artist.id === id;\r\n      }) || {\r\n        id: id\r\n      };\r\n  }\r\n\r\n  // Set an artist's status to seated, with the specified table number.\r\n  function setSeated(id, tableNumber) {\r\n    return getArtistById(id).then(function(artist) {\r\n      return setArtist({\r\n        id: id,\r\n        tableNumber: tableNumber,\r\n        seatedDays: appendToday(artist.seatedDays),\r\n        seatedLast: moment().format(),\r\n        standbyOrder: null,\r\n        lotteryOrder: null\r\n      });\r\n    });\r\n  }\r\n\r\n  // Add an artist to the end of the standby list.\r\n  function setStandby(id) {\r\n    return getAllArtists().then(function(artists) {\r\n      return setArtist({\r\n        id: id,\r\n        standbyOrder: getMaxFieldValue(artists, 'standbyOrder') + 1,\r\n        lotteryOrder: null,\r\n        tableNumber: null,\r\n        roomNumber: null,\r\n        standbyDays: appendToday(getArtistFromArray(artists, id).standbyDays)\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set an artist to signed out.\r\n  function setSignedOut(id, eligible) {\r\n    return setArtist({\r\n      id: id,\r\n      tableNumber: null,\r\n      lotteryOrder: null,\r\n      standbyOrder: null,\r\n      lotteryEligible: eligible,\r\n      roomNumber: null\r\n    });\r\n  }\r\n\r\n  // Add an artist to the end of the lottery list.\r\n  function addLottery(id) {\r\n    return getAllArtists().then(function(artists) {\r\n      return setArtist({\r\n        id: id,\r\n        lotteryOrder: getMaxFieldValue(artists, 'lotteryOrder') + 1,\r\n        standbyOrder: null,\r\n        tableNumber: null,\r\n        roomNumber: null\r\n      });\r\n    });\r\n  }\r\n\r\n  // Clear all artists from the database.\r\n  function clearArtists() {\r\n    return Database.open().artists.clear()\r\n      .then(incrementTableVersion);\r\n  }\r\n\r\n  // Delete an artist from the database by ID.\r\n  function deleteArtistById(id) {\r\n    return Database.open().artists.delete(+id)\r\n      .then(incrementTableVersion);\r\n  }\r\n\r\n  // Get all artists.\r\n  function getAllArtists() {\r\n    return Database.open().artists.toArray();\r\n  }\r\n\r\n  // Get an artist by ID.\r\n  function getArtistById(id) {\r\n    return Database.open().artists.get(+id);\r\n  }\r\n\r\n  // Set multiple artist data.\r\n  function setAllArtists(artists) {\r\n    return Database.transaction(function() {\r\n      artists.forEach(function(artist) {\r\n        var isNew = !artist.id;\r\n        var data = Object.assign({}, artist);\r\n        delete data.id;\r\n        if (isNew) {\r\n          Database.open().artists.put(data);\r\n        } else {\r\n          Database.open().artists.update(+artist.id, data);\r\n        }\r\n      });\r\n      Database.incrementTableVersion('artists');\r\n    });\r\n  }\r\n\r\n  // Set an artist's data. If the ID doesn't exist, a new record is made.\r\n  function setArtist(artist) {\r\n    return setAllArtists([artist]);\r\n  }\r\n\r\n  function incrementTableVersion() {\r\n    return Database.incrementTableVersion('artists');\r\n  }\r\n})(window);\r\n","(function(scope) {\r\n  var db;\r\n\r\n  // Interface.\r\n  scope.Database = {\r\n    delete: deleteDatabase,\r\n    getSchema: getSchema,\r\n    getTableVersion: getTableVersion,\r\n    incrementTableVersion: incrementTableVersion,\r\n    open: initialize,\r\n    transaction: performTransaction\r\n  };\r\n\r\n  // (Lazily) initialize Dexie.\r\n  function initialize() {\r\n    if (!db) {\r\n      var dexie = new Dexie('ArtTrackPlus2');\r\n      dexie.version(1)\r\n        .stores({\r\n          artists: [\r\n            '++id',\r\n            'name',\r\n            'badgeNumber',\r\n            'tableNumber',\r\n            'roomNumber',\r\n            'phone',\r\n            'remarks',\r\n            'lotteryEligible',\r\n            'lotteryGuaranteed',\r\n            'lotteryOrder',\r\n            'seatedLast',\r\n            'seatedDays',\r\n            'standbyDays',\r\n            'standbyOrder'\r\n          ].join(),\r\n          tableVersions: [\r\n            '++id',\r\n            'artists'\r\n          ].join()\r\n        });\r\n      dexie.open().catch(handleError);\r\n      Dexie.Promise.on('error', handleError);\r\n\r\n      db = dexie;\r\n    }\r\n\r\n    return db;\r\n  }\r\n\r\n  // Get the schema for a table.\r\n  function getSchema(tableName) {\r\n    return initialize()[tableName].schema;\r\n  }\r\n\r\n  // Get stack trace.\r\n  function getStackTrace() {\r\n    var err = new Error();\r\n    return err.stack;\r\n  }\r\n\r\n  // Error handler for Dexie.\r\n  function handleError(error) {\r\n    var errorMessage = 'Dexie has encountered an error: ' + error + '\\n\\n' +\r\n      getStackTrace();\r\n    console.error(errorMessage);\r\n  }\r\n\r\n  // Delete database.\r\n  function deleteDatabase() {\r\n    var database = initialize();\r\n    db = null;\r\n    return database.delete();\r\n  }\r\n\r\n  // Perform a database transaction.\r\n  function performTransaction(callback) {\r\n    return initialize().transaction('rw', ['artists', 'tableVersions'], callback);\r\n  }\r\n\r\n  // Get current table version.\r\n  function getTableVersion() {\r\n    return initialize().tableVersions.get(1);\r\n  }\r\n\r\n  // Increment table version.\r\n  function incrementTableVersion(tableName) {\r\n    return getTableVersion(tableName).then(function(versions) {\r\n      if (!versions) {\r\n        versions = {\r\n          id: 1\r\n        };\r\n      }\r\n      if (!versions[tableName]) {\r\n        versions[tableName] = 0;\r\n      }\r\n      versions[tableName]++;\r\n      return initialize().tableVersions.put(versions);\r\n    });\r\n  }\r\n})(window);\r\n","(function(scope) {\r\n\r\n  // Interface.\r\n  scope.Filter = {\r\n    lottery: lottery,\r\n    lotteryEligible: lotteryEligible,\r\n    lotteryGuaranteed: lotteryGuaranteed,\r\n    lotteryInOrder: lotteryInOrder,\r\n    seated: seated,\r\n    seatedInOrder: seatedInOrder,\r\n    sorted: sortArtistsByName,\r\n    standby: standby,\r\n    standbyInOrder: standbyInOrder\r\n  };\r\n\r\n  // Filter artists that are in the lottery, then return them in ABC order.\r\n  function lottery(artists) {\r\n    return sortArtistsByName(filterArtists(artists, 'lotteryOrder'));\r\n  }\r\n\r\n  // Filter artists that are eligible for lottery pick.\r\n  function lotteryEligible(artists) {\r\n    return filterArtists(artists, 'lotteryEligible');\r\n  }\r\n\r\n  // Filter artists that are guaranteed for lottery pick.\r\n  function lotteryGuaranteed(artists) {\r\n    return filterArtists(artists, 'lotteryGuaranteed');\r\n  }\r\n\r\n  // Filter artists that are in the lottery, then return them in lottery order.\r\n  function lotteryInOrder(artists) {\r\n    return filterAndSortArtists(artists, 'lotteryOrder');\r\n  }\r\n\r\n  // Filter artists that are seated, then return them in ABC order.\r\n  function seated(artists) {\r\n    return sortArtistsByName(filterArtists(artists, 'tableNumber'));\r\n  }\r\n\r\n  // Filter artists that are seated, then return them in table number order.\r\n  function seatedInOrder(artists) {\r\n    return sortArtistsNumerically(filterArtists(artists, 'tableNumber'), 'tableNumber');\r\n  }\r\n\r\n  // Filter artists that are on standby, then return them in ABC order.\r\n  function standby(artists) {\r\n    return sortArtistsByName(filterArtists(artists, 'standbyOrder'));\r\n  }\r\n\r\n  // Filter artists that are on standby, then return them in table number order.\r\n  function standbyInOrder(artists) {\r\n    return filterAndSortArtists(artists, 'standbyOrder');\r\n  }\r\n\r\n  // Filter and sort an artist list.\r\n  function filterAndSortArtists(artists, filterField, sortField) {\r\n    return sortArtists(filterArtists(artists, filterField),\r\n      sortField || filterField);\r\n  }\r\n\r\n  // Filter an artist list for values that are at all present.\r\n  function filterArtists(artists, filterField) {\r\n    return artists.filter(function(a) {\r\n      return !!a[filterField];\r\n    });\r\n  }\r\n\r\n  // Sort an artist list.\r\n  function sortArtists(artists, sortField) {\r\n    return artists.slice().sort(function(a, b) {\r\n      var fieldA = a[sortField];\r\n      var fieldB = b[sortField];\r\n      return fieldA > fieldB ? 1 : (fieldA < fieldB ? -1 : 0);\r\n    });\r\n  }\r\n\r\n  // Sort an artist list, with numeric values.\r\n  function sortArtistsNumerically(artists, sortField) {\r\n    return artists.slice().sort(function(a, b) {\r\n      var fieldA = +a[sortField];\r\n      var fieldB = +b[sortField];\r\n      return fieldA > fieldB ? 1 : (fieldA < fieldB ? -1 : 0);\r\n    });\r\n  }\r\n\r\n  // Sort names without case sensitivity.\r\n  function sortArtistsByName(artists) {\r\n    return artists.slice().sort(function(a, b) {\r\n      var fieldA = (a.name || '').toLocaleLowerCase();\r\n      var fieldB = (b.name || '').toLocaleLowerCase();\r\n      return fieldA > fieldB ? 1 : (fieldA < fieldB ? -1 : 0);\r\n    });\r\n  }\r\n})(window);\r\n","(function(scope) {\r\n\r\n  // Interface.\r\n  scope.Generator = {\r\n    getRandomArtist: getRandomArtist\r\n  };\r\n\r\n  // Generate random artist data.\r\n  function getRandomArtist() {\r\n    var artist = {\r\n      name: 'Test ' + (random(9000) + 1000),\r\n      badgeNumber: random(10000) + 1,\r\n      phone: randomOf([null, randomPhone()]),\r\n      remarks: randomOf([null, 'Etc Whatever']),\r\n      lotteryEligible: randomBool(),\r\n    };\r\n\r\n    return artist;\r\n  }\r\n\r\n  // Generate a random integer up to (but not including) the max value.\r\n  function random(max) {\r\n    return Math.floor(Math.random() * max);\r\n  }\r\n\r\n  // Select a random value from an array of values.\r\n  function randomOf(choices) {\r\n    return choices[random(choices.length)];\r\n  }\r\n\r\n  // Generate a random boolean value.\r\n  function randomBool() {\r\n    return Math.random() >= 0.5;\r\n  }\r\n\r\n  // Generate a random US phone number.\r\n  function randomPhone() {\r\n    var separator = randomOf(['.', '-', '']);\r\n    var countryCode = randomOf(['', '1' + separator]);\r\n    return countryCode +\r\n      (random(800) + 200) + separator +\r\n      (random(800) + 200) + separator +\r\n      (random(9000) + 1000);\r\n  }\r\n\r\n})(window);\r\n","/* globals Artists, Filter */\r\n\r\n(function(scope) {\r\n\r\n  // Interface.\r\n  scope.Lottery = {\r\n    reset: resetSeating,\r\n    run: runLottery\r\n  };\r\n\r\n  // Clear existing artist lottery/seated data.\r\n  function resetSeating(artists) {\r\n    artists.forEach(function(a) {\r\n      a.lotteryOrder = null;\r\n      a.standbyOrder = null;\r\n      a.tableNumber = null;\r\n    });\r\n  }\r\n\r\n  // Shuffle artists.\r\n  function shuffleArtists(artists) {\r\n    var count = artists.length;\r\n    artists.forEach(function(a, i) {\r\n      var randomIndex = Math.floor(Math.random() * count);\r\n      var temp = artists[i];\r\n      artists[i] = artists[randomIndex];\r\n      artists[randomIndex] = temp;\r\n    });\r\n  }\r\n\r\n  // Run the lottery for the specified number of slots available.\r\n  function runLottery(slotsAvailable) {\r\n    Artists.getAll().then(function(allArtists) {\r\n      // Initialization.\r\n      var eligibleArtists = Filter.lotteryEligible(allArtists);\r\n\r\n      resetSeating(allArtists);\r\n      shuffleArtists(eligibleArtists);\r\n\r\n      // Populate the guaranteed artists first.\r\n      var lotteryNumber = 1;\r\n      eligibleArtists.forEach(function(a) {\r\n        if (slotsAvailable > 0 && !!a.lotteryGuaranteed) {\r\n          a.lotteryOrder = lotteryNumber++;\r\n          slotsAvailable--;\r\n        }\r\n      });\r\n\r\n      // Fill up the remaining slots. If no further slots are\r\n      // avaialble, assign standby order.\r\n      var standbyNumber = 1;\r\n      eligibleArtists.forEach(function(a) {\r\n        if (!a.lotteryOrder) {\r\n          if (slotsAvailable > 0) {\r\n            a.lotteryOrder = lotteryNumber++;\r\n            slotsAvailable--;\r\n          } else {\r\n            a.standbyOrder = standbyNumber++;\r\n            a.standbyDays = Artists.appendToday(a.standbyDays);\r\n          }\r\n        }\r\n      });\r\n\r\n      // Apply the changes.\r\n      Artists.setAll(eligibleArtists);\r\n    });\r\n  }\r\n})(window);\r\n","/* globals Artists, Filter */\r\n\r\n(function(scope) {\r\n\r\n  // Interface.\r\n  scope.Modal = {\r\n    addArtist: addArtist,\r\n    alert: showAlert,\r\n    batchSignOut: batchSignOut,\r\n    bulkArtistRoom: bulkArtistRoom,\r\n    confirm: showConfirm,\r\n    confirmConfirm: confirmConfirm,\r\n    editArtist: editArtist,\r\n    editArtistRaw: editArtistRaw,\r\n    prompt: showPrompt,\r\n    promptConfirm: promptConfirm,\r\n    resetDatabase: resetDatabase,\r\n    runLottery: runLottery,\r\n    seedDatabase: seedDatabase,\r\n    setRawArtistId: setRawArtistId,\r\n    showYesNoCancel: showYesNoCancel\r\n  };\r\n\r\n  // Private vars.\r\n  var _promptConfirm;\r\n  var _rapidEntry = false;\r\n\r\n  // Execute confirm dialog confirmation events.\r\n  function confirmConfirm(value) {\r\n    if (_promptConfirm) {\r\n      _promptConfirm(value);\r\n    }\r\n  }\r\n\r\n  // Execute prompt confirmation events.\r\n  function promptConfirm() {\r\n    if (_promptConfirm) {\r\n      _promptConfirm($('#prompt-dialog input').val());\r\n    }\r\n  }\r\n\r\n  // Populate the Artist modal with data from the model.\r\n  function mapArtistData(artistData) {\r\n    $('#artist-id').text(artistData.id || '0');\r\n    $('#artist-name').val(artistData.name || '');\r\n    $('#artist-badge').val(artistData.badgeNumber || '');\r\n    $('#artist-table').val(artistData.tableNumber || '');\r\n    $('#artist-room').val(artistData.roomNumber || '');\r\n    $('#artist-phone').val(artistData.phone || '');\r\n    $('#artist-remarks').val(artistData.remarks || '');\r\n    $('#artist-lottery-eligible').prop('checked', artistData.lotteryEligible || false);\r\n    $('#artist-lottery-guaranteed').prop('checked', artistData.lotteryGuaranteed || false);\r\n    $('#artist-seated-last').text(!!artistData.seatedLast ?\r\n      moment(artistData.seatedLast).calendar() : 'Never');\r\n    $('#artist-seated-days').text(artistData.seatedDays || 'Never');\r\n    $('#artist-standby-days').text(artistData.standbyDays || 'Never');\r\n  }\r\n\r\n  // Show the Artist modal with empty fields.\r\n  function addArtist(rapidEntry, doNotOpenModal) {\r\n    _rapidEntry = !!rapidEntry;\r\n    mapArtistData({\r\n      lotteryEligible: true\r\n    });\r\n    $('#artist-detail-mode').text('New Artist ');\r\n    $('.artist-add-only').show();\r\n    $('.artist-edit-only').hide();\r\n    if (!doNotOpenModal) {\r\n      $('#artist-detail').modal();\r\n    }\r\n  }\r\n\r\n  function batchSignOut() {\r\n    $('#batch-sign-out').modal();\r\n  }\r\n\r\n  // Show the Rapid Room Entry modal.\r\n  function bulkArtistRoom() {\r\n    Artists.getAll().then(function(artists) {\r\n      var container = $('<div/>');\r\n\r\n      // Filter out artists who are not already seated.\r\n      artists = Filter.seatedInOrder(artists);\r\n\r\n      // Generate HTML elements for seated artists.\r\n      artists.forEach(function(a) {\r\n        var nameField = $('<p/>')\r\n          .addClass('form-control-static')\r\n          .text(a.name);\r\n\r\n        var tableField = $('<p/>')\r\n          .addClass('form-control-static')\r\n          .text(a.tableNumber);\r\n\r\n        var inputBox = $('<input type=\"text\">')\r\n          .addClass('form-control')\r\n          .attr('id', 'bulk-artist-room-number-' + a.id)\r\n          .attr('value', a.roomNumber)\r\n          .attr('data-artist-id', a.id);\r\n\r\n        container.append(\r\n          $('<tr/>').append($('<td/>').append(nameField))\r\n            .append($('<td/>').append(tableField))\r\n            .append($('<td/>').append(inputBox)));\r\n      });\r\n\r\n      // Apply HTML and events.\r\n      $('#bulk-artist-room-table').html(container.html());\r\n      $('#bulk-artist-room-table input[type=text]').last().keydown(function(e) {\r\n        if (e.which === 13) {\r\n          e.preventDefault();\r\n          window.setTimeout(function() {\r\n            $('[data-save=rooms]').focus();\r\n          }, 10);\r\n        }\r\n      });\r\n\r\n      // Show modal.\r\n      $('#bulk-artist-room').modal();\r\n\r\n      // Dynamically add SlimScroll bar to the modal (it can't be added on load)\r\n      $('#bulk-artist-room .room-content').each(function() {\r\n        var div = $(this);\r\n        if (!div.hasClass('scroll-added')) {\r\n          div.addClass('scroll-added');\r\n          div.slimScroll({\r\n            height: '100%'\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Show the Artist modal with fields from an existing artist.\r\n  function editArtist(id) {\r\n    Artists.get(id).then(function(artistData) {\r\n      mapArtistData(artistData);\r\n      $('#artist-detail-mode').text((artistData.name || 'Edit Artist') + ' ');\r\n      $('.artist-add-only').hide();\r\n      $('.artist-edit-only').show();\r\n      $('#artist-detail').modal();\r\n    });\r\n  }\r\n\r\n  // Show the Raw Edit modal.\r\n  function editArtistRaw() {\r\n    $('#raw-editor').modal();\r\n  }\r\n\r\n  // Show the Reset Database confirmation modal.\r\n  function resetDatabase() {\r\n    $('#reset-dialog').modal();\r\n  }\r\n\r\n  // Show the Run Lottery modal.\r\n  function runLottery() {\r\n    // Safeguard against wiping out the standby/checkin list.\r\n    Artists.getAll().then(function(artists) {\r\n      if (artists.some(function(a) {\r\n          return !!a.tableNumber;\r\n        })) {\r\n        showAlert('Lottery can\\'t be run. Artists are signed in yet.');\r\n      } else {\r\n        $('#run-lottery').modal();\r\n      }\r\n    });\r\n  }\r\n\r\n  // Show the Seed Database modal.\r\n  function seedDatabase() {\r\n    $('#generate-dialog').modal();\r\n  }\r\n\r\n  // Fill in the raw artist data text area.\r\n  function setRawArtistId(selectedId) {\r\n    var editor = $('[data-edit-raw=artist]');\r\n    if (!!selectedId) {\r\n      Artists.get(selectedId).then(function(artist) {\r\n        console.log(artist);\r\n        if (artist) {\r\n          delete artist.id;\r\n          editor.val(JSON.stringify(artist, null, 2));\r\n        } else {\r\n          editor.val('');\r\n        }\r\n      });\r\n    } else {\r\n      editor.val('');\r\n    }\r\n  }\r\n\r\n  // Show the alert modal.\r\n  function showAlert(message, caption) {\r\n    if (message) {\r\n      $('#alert-title').text(caption || 'Notice');\r\n      $('#alert-body').text(message);\r\n      $('#alert-dialog').modal();\r\n    }\r\n  }\r\n\r\n  // Show the confirm modal.\r\n  function showConfirm(message, caption, callback) {\r\n    _promptConfirm = callback;\r\n    if (message) {\r\n      $('#confirm-title').text(caption || 'Confirmation Needed');\r\n      $('#confirm-body').text(message);\r\n      $('#confirm-dialog').modal();\r\n    }\r\n  }\r\n\r\n  // Show the prompt modal.\r\n  function showPrompt(message, caption, callback) {\r\n    _promptConfirm = callback;\r\n    if (message) {\r\n      $('#prompt-dialog input').val('');\r\n      $('#prompt-title').text(caption || 'Input Needed');\r\n      $('#prompt-body').text(message);\r\n      $('#prompt-dialog').modal();\r\n    }\r\n  }\r\n\r\n  // Show the yes/no/cancel modal.\r\n  function showYesNoCancel(message, caption, callback) {\r\n    _promptConfirm = callback;\r\n    if (message) {\r\n      $('#yes-no-cancel-title').text(caption || 'Confirmation Needed');\r\n      $('#yes-no-cancel-body').text(message);\r\n      $('#yes-no-cancel-dialog').modal();\r\n    }\r\n  }\r\n\r\n  // Initialize modal actions.\r\n  $(function() {\r\n\r\n    function getArtistFormId() {\r\n      return Number($('#artist-id').text());\r\n    }\r\n\r\n    function saveEditedArtist() {\r\n      var artistData = {};\r\n      artistData.id = getArtistFormId();\r\n      artistData.name = $('#artist-name').val();\r\n      artistData.badgeNumber = $('#artist-badge').val();\r\n      artistData.tableNumber = $('#artist-table').val();\r\n      artistData.roomNumber = $('#artist-room').val();\r\n      artistData.phone = $('#artist-phone').val();\r\n      artistData.remarks = $('#artist-remarks').val();\r\n      artistData.lotteryEligible = $('#artist-lottery-eligible').prop('checked');\r\n      artistData.lotteryGuaranteed = $('#artist-lottery-guaranteed').prop('checked');\r\n      if (artistData.tableNumber) {\r\n        artistData.lotteryOrder = 0;\r\n        artistData.standbyOrder = 0;\r\n      }\r\n      Artists.set(artistData);\r\n    }\r\n\r\n    function saveEditedRooms() {\r\n      var artistRooms = [];\r\n\r\n      $('#bulk-artist-room-table input[type=text]').each(function() {\r\n        var inputElement = $(this);\r\n        var artistId = inputElement.attr('data-artist-id');\r\n        if (!!artistId) {\r\n          artistRooms.push({\r\n            id: artistId,\r\n            roomNumber: inputElement.val()\n          });\r\n        }\r\n      });\r\n\r\n      Artists.setAll(artistRooms);\r\n    }\r\n\r\n    $('#artist-detail input[type=text]').last().keydown(function(e) {\r\n      if (e.which === 13) {\r\n        e.preventDefault();\r\n        if (!_rapidEntry) {\r\n          $('[data-save=artist]:visible').trigger('click');\r\n        } else {\r\n          saveEditedArtist();\r\n          addArtist(_rapidEntry, true);\r\n          window.setTimeout(function() {\r\n            $('#artist-detail input').first().focus();\r\n          }, 10);\r\n        }\r\n      }\r\n    });\r\n\r\n    $('[data-delete=artist]').click(function() {\r\n      showConfirm(\r\n        'Really delete this artist?',\r\n        'Delete Artist Confirmation',\r\n        function(confirmed) {\r\n          if (confirmed) {\r\n            Artists.delete(getArtistFormId());\r\n          }\r\n        });\r\n    });\r\n\r\n    $('[data-save=artist]').click(function() {\r\n      saveEditedArtist();\r\n    });\r\n\r\n    $('[data-save=rooms]').click(function() {\r\n      saveEditedRooms();\r\n    });\r\n\r\n    $('[data-standby=artist]').click(function() {\r\n      var performAction = function(artist) {\r\n        Artists.setStandby(artistId).then(function() {\r\n          Artists.getAll().then(function(artists) {\r\n            var index = Filter.standbyInOrder(artists).length;\r\n            showAlert(\r\n              'The artist is #' + index + ' in standby.',\r\n              'Add ' + artist.name + ' to Standby List'\r\n            );\r\n          });\r\n        });\r\n      };\r\n\r\n      var artistId = getArtistFormId();\r\n      Artists.get(artistId).then(function(artist) {\r\n        var caption = 'Add ' + artist.name + ' to Standby List';\r\n        if (!!artist.standbyOrder) {\r\n          showConfirm(\r\n            'This artist is already on standby. Move them to the bottom of the list?',\r\n            caption,\r\n            function(confirmed) {\r\n              if (confirmed) {\r\n                performAction(artist);\r\n              }\r\n            });\r\n        } else {\r\n          performAction(artist);\r\n        }\r\n      });\r\n    });\r\n\r\n    $('[data-signin=artist]').click(function() {\r\n      Artists.get(getArtistFormId()).then(function(artist) {\r\n        showPrompt(\r\n          'Enter a table number.',\r\n          'Sign In for ' + artist.name,\r\n          function(seat) {\r\n            if (seat) {\r\n              Artists.setSeated(getArtistFormId(), seat);\r\n            }\r\n          });\r\n      });\r\n    });\r\n\r\n    $('[data-signout=artist]').click(function() {\r\n      Artists.get(getArtistFormId()).then(function(artist) {\r\n        var caption = 'Signing out ' + artist.name;\r\n        if (!!artist.tableNumber || !!artist.standbyOrder || !!artist.lotteryOrder) {\r\n          showYesNoCancel(\r\n            'Would this artist like to be included in tomorrow\\'s lottery?',\r\n            caption,\r\n            function(eligible) {\r\n              if (eligible === true || eligible === false) {\r\n                Artists.setSignedOut(getArtistFormId(), !!eligible);\r\n              }\r\n            });\r\n        } else {\r\n          showAlert(\r\n            'This artist is already signed out.',\r\n            caption\r\n          );\r\n        }\r\n      });\r\n    });\r\n\r\n    $('[data-select-raw=artist]').change(function() {\r\n      var selectOption = $(this).find(':selected');\r\n      var selectedId = selectOption.attr('value');\r\n      setRawArtistId(selectedId);\r\n    });\r\n\r\n    $('[data-prompt-confirm]').click(function() {\r\n      promptConfirm();\r\n    });\r\n\r\n    $('[data-confirm-confirm]').click(function() {\r\n      confirmConfirm(true);\r\n    });\r\n\r\n    $('[data-confirm-deny]').click(function() {\r\n      confirmConfirm(false);\r\n    });\r\n\r\n    $('[data-confirm-cancel]').click(function() {\r\n      confirmConfirm(null);\r\n    });\r\n\r\n    $('#prompt-dialog input').keydown(function(e) {\r\n      if (e.which === 13) {\r\n        e.preventDefault();\r\n        $('[data-prompt-confirm]').trigger('click');\r\n      }\r\n    });\r\n  });\r\n})(window);\r\n","/* globals Artists, Filter, Modal */\r\n\r\n(function(scope) {\r\n  scope.Names = {\r\n    populate: populate\r\n  };\r\n\r\n  // Create an icon to go on the name list.\r\n  function buildIcon(iconName) {\r\n    return $('<i/>')\r\n      .addClass('fa fa-' + iconName);\r\n  }\r\n\r\n  // Create a span element with the specified class.\r\n  function buildSpan(className) {\r\n    return $('<span/>')\r\n      .addClass(className);\r\n  }\r\n\r\n  // Populate columns in all places in the app that contain artist lists.\r\n  function populate() {\r\n    Artists.getAll().then(function(artistData) {\r\n      var allListByName = Filter.sorted(artistData);\r\n      var standbyList = Filter.standbyInOrder(artistData);\r\n      var seatedList = Filter.seated(artistData);\r\n      var lotteryList = Filter.lotteryInOrder(artistData);\r\n      var lotteryListByName = Filter.lottery(artistData);\r\n\r\n      buildNames($('.artist-names'), allListByName, {\r\n        withSymbols: true\r\n      });\r\n      buildNames($('.lottery-names'), lotteryList, {\r\n        withOrder: true\r\n      });\r\n      buildNames($('.standby-names'), standbyList, {\r\n        withOrder: true\r\n      });\r\n      buildNames($('.seated-names'), seatedList);\r\n\r\n      buildNames($('.lottery-sorted-names'), lotteryListByName, {\r\n        disableClick: true\r\n      });\r\n      buildNames($('.standby-sorted-names'), standbyList, {\r\n        disableClick: true\r\n      });\r\n      buildNames($('.seated-sorted-names'), seatedList, {\r\n        disableClick: true\r\n      });\r\n\r\n      buildNameOptions($('[data-select-raw=artist]'), allListByName);\r\n\r\n      $('.count-artists').text(artistData.length);\r\n      $('.count-lottery').text(lotteryList.length);\r\n      $('.count-standby').text(standbyList.length);\r\n      $('.count-seated').text(seatedList.length);\r\n    });\r\n  }\r\n\r\n  // Build a name list for a Select element.\r\n  function buildNameOptions(container, nameData) {\r\n    var tempContainer = $('<div/>');\r\n    tempContainer.append($('<option/>')\r\n      .text('(select one...)'));\r\n\r\n    nameData.forEach(function(artist) {\r\n      tempContainer.append($('<option/>')\r\n        .attr('value', artist.id)\r\n        .text(artist.name)\r\n      );\r\n    });\r\n\r\n    container.html(tempContainer.html());\r\n  }\r\n\r\n  // Build a name list for use in the DOM.\r\n  function buildNames(container, nameData, options) {\r\n    options = $.extend({\r\n      disableClick: false,\r\n      withSymbols: false,\r\n      withOrder: false\r\n    }, options || {});\r\n\r\n    container.empty();\r\n\r\n    nameData.forEach(function(artist, index) {\r\n      var nameElement = $('<a/>')\r\n        .addClass('line')\r\n        .text(artist.name + ' ');\r\n\r\n      if (options.withOrder) {\r\n        nameElement.prepend(buildSpan('artist-order')\r\n          .text('' + (index + 1) + '.'));\r\n      }\r\n\r\n      if (artist.tableNumber) {\r\n        var tableElement = buildSpan('artist-seat');\r\n        tableElement.text('#' + artist.tableNumber);\r\n        nameElement.append(tableElement);\r\n      }\r\n\r\n      if (options.withSymbols) {\r\n        var symbolElement = buildSpan('artist-symbols');\r\n\r\n        var standbyFlag = !artist.seatedLast &&\r\n          (artist.standbyDays && artist.standbyDays.length >= 2);\r\n\r\n        if (artist.lotteryOrder > 0) {\r\n          symbolElement.append(buildIcon('check faded'));\r\n        }\r\n\r\n        if (artist.standbyOrder > 0) {\r\n          symbolElement.append(buildIcon('clock-o faded'));\r\n        }\r\n\r\n        if (artist.tableNumber) {\r\n          symbolElement.append(buildIcon('sign-in faded'));\r\n        }\r\n\r\n        if (standbyFlag) {\r\n          symbolElement.append(buildIcon('exclamation attention'));\r\n        }\r\n\r\n        if (symbolElement.html().length > 0) {\r\n          nameElement.append(symbolElement);\r\n        }\r\n      }\r\n\r\n      container.append(nameElement);\r\n\r\n      if (!options.disableClick) {\r\n        nameElement\r\n          .attr('href', '#')\r\n          .click(createNameDetailClickHandler(artist.id));\r\n      }\r\n    });\r\n  }\r\n\r\n  // Create a click handler for opening name detail modals.\r\n  function createNameDetailClickHandler(id) {\r\n    return function() {\r\n      openNameDetail(id);\r\n    };\r\n  }\r\n\r\n  // Show name detail modal.\r\n  function openNameDetail(id) {\r\n    Modal.editArtist(id);\r\n  }\r\n})(window);\r\n","/* globals Database */\r\n\r\n(function(scope) {\r\n\r\n  // Interface.\r\n  scope.Scheduler = {\r\n    onArtistChange: onArtistChange,\r\n  };\r\n\r\n  // Handlers for when artist data changes.\r\n  var artistChangeEvents = [];\r\n  var artistTableVersion = -1;\r\n  var isDatabaseBusy = false;\r\n\r\n  // Initialize the timer event on load.\r\n  $(function() {\r\n    window.setInterval(onTick, 500);\r\n  });\r\n\r\n  // Call all functions in an array.\r\n  function invokeAll(events) {\r\n    events.forEach(function(e) {\r\n      e();\r\n    });\r\n  }\r\n\r\n  // Schedule an event to run every time artist data changes.\r\n  function onArtistChange(eventFunction) {\r\n    artistChangeEvents.push(eventFunction);\r\n  }\r\n\r\n  // Main timer event.\r\n  function onTick() {\r\n    if (!isDatabaseBusy) {\r\n      Database.getTableVersion('artists').then(function(versions) {\r\n        if (!versions) {\r\n          versions = {\r\n            id: 1\r\n          };\r\n          Database.open().tableVersions.put(versions);\r\n        }\r\n        if (versions.artists !== artistTableVersion) {\r\n          console.log('Update requested. New version ' + versions.artists);\r\n          artistTableVersion = versions.artists;\r\n          invokeAll(artistChangeEvents);\r\n        }\r\n        isDatabaseBusy = false;\r\n      });\r\n      isDatabaseBusy = true;\r\n    }\r\n  }\r\n})(window);\r\n","(function(scope) {\r\n  scope.Screen = {\r\n    reposition: reposition,\r\n    select: select\r\n  };\r\n\r\n  // Center the screen element horizontally. This isn't the most\r\n  // elegant solution...\r\n  function reposition() {\r\n    var width = $(window).width();\r\n    var leftMargin = 0;\r\n    if (width > 960) {\r\n      var containerWidth = $('.screen:visible').width();\r\n      leftMargin = (width - containerWidth) / 2;\r\n    }\r\n    $('.screen').css('marginLeft', leftMargin);\r\n  }\r\n\r\n  // Select a screen by ID to show.\r\n  function select(screenId) {\r\n    // Hide other screens.\r\n    $('.screen[id!=\"' + screenId + '\"]').hide();\r\n\r\n    var desiredScreen = $('.screen#' + screenId);\r\n    if (desiredScreen.length > 0) {\r\n\r\n      // Hide the nav if the screen calls for it.\r\n      if (desiredScreen.hasClass('hide-nav')) {\r\n        $('nav').remove();\r\n        $('.screen').css('padding-top', 0);\r\n      }\r\n\r\n      // Show the desired screen.\r\n      desiredScreen.show();\r\n      reposition();\r\n\r\n      // Apply SlimScroll if it hasn't already been added.\r\n      var content = desiredScreen.find('.content');\r\n      if (!content.hasClass('scroll-added')) {\r\n        content.addClass('scroll-added');\r\n        content.slimScroll({\r\n          height: '100%',\r\n          size: '12px',\r\n          alwaysVisible: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n})(window);\r\n","/* globals Artists, Database, Generator, Lottery, Modal */\r\n\r\n(function(scope) {\r\n\r\n  // Interface.\r\n  scope.SystemActions = {\r\n    batchSignOut: batchSignOut,\r\n    exportCsv: exportCsv,\r\n    findArtistByBadge: findArtistByBadge,\r\n    findArtistByTable: findArtistByTable,\r\n    newArtistRapidEntry: newArtistRapidEntry,\r\n    resetDatabase: resetDatabase,\r\n    runLottery: runLottery,\r\n    saveArtistRaw: saveArtistRaw,\r\n    seedDatabase: seedDatabase\r\n  };\r\n\r\n  // Make the user type in a word. Returns true if they actually did it.\r\n  function confirmAction(actionName, caption, callback) {\r\n    return Modal.prompt(\r\n      'Confirm by typing \\'' + actionName + '\\' into the box below.',\r\n      caption || 'Confirmation',\r\n      function(value) {\r\n        if (value === actionName) {\r\n          callback();\r\n        }\r\n      });\r\n  }\r\n\r\n  // Sign out all artists. Mark those who have not signed out ineligible.\r\n  // Artists still on standby are marked eligible for lottery.\r\n  function batchSignOut() {\r\n    confirmAction(\r\n      'close',\r\n      'Close Out Day',\r\n      function() {\r\n        return Artists.getAll().then(function(artists) {\r\n          return Database.transaction(function() {\r\n            var promise;\r\n            artists.forEach(function(a) {\r\n              if (!!a.tableNumber) {\r\n                promise = Artists.setSignedOut(a.id, false);\r\n              } else if (!!a.standbyOrder || !!a.lotteryOrder) {\r\n                promise = Artists.setSignedOut(a.id, true);\r\n              }\r\n            });\r\n            return promise;\r\n          });\r\n        });\r\n      });\r\n  }\r\n\r\n  // Export everything as a CSV file.\r\n  function exportCsv() {\r\n    return Artists.getAll().then(function(users) {\r\n      var csv = '';\r\n\r\n      // build CSV columns\r\n      var csvColumns = [\r\n        'name',\r\n        'badgeNumber',\r\n        'tableNumber',\r\n        'roomNumber',\r\n        'phone',\r\n        'remarks',\r\n        'seatedLast',\r\n        'seatedDays',\r\n        'standbyDays'\r\n      ];\r\n      csv += csvColumns.join(',') + '\\r\\n';\r\n\r\n      // build CSV rows\r\n      users.forEach(function(user) {\r\n        var csvRow = [];\r\n        csvColumns.forEach(function(column) {\r\n          var columnValue = user[column];\r\n          if (columnValue === false) {\r\n            columnValue = 'N';\r\n          } else if (columnValue === true) {\r\n            columnValue = 'Y';\r\n          } else if (columnValue !== 0 && !columnValue) {\r\n            columnValue = null;\r\n          } else if (Array.isArray(columnValue)) {\r\n            columnValue = columnValue.join('|');\r\n          } else {\r\n            columnValue = '' + columnValue;\r\n          }\r\n          if (columnValue !== null) {\r\n            columnValue = '\"' + columnValue.replace(/\"/g, '\"\"') + '\"';\r\n          } else {\r\n            columnValue = '';\r\n          }\r\n          csvRow.push(columnValue);\r\n        });\r\n        csv += csvRow.join(',') + '\\r\\n';\r\n      });\r\n\r\n      // build data URI and start downloading\r\n      var anchor = window.document.createElement('a');\r\n      anchor.href = window.URL.createObjectURL(new Blob([csv], {\r\n        type: 'text/csv'\r\n      }));\r\n      anchor.download = 'Artists.csv';\r\n      document.body.appendChild(anchor);\r\n      anchor.click();\r\n      document.body.removeChild(anchor);\r\n    });\r\n  }\r\n\r\n  // Find an artist. Pass in a function that returns TRUE for criteria.\r\n  function findArtist(predicate) {\r\n    return Artists.getAll().then(function(artists) {\r\n      var filteredArtists = artists.filter(predicate);\r\n      if (filteredArtists.length > 0) {\r\n        Modal.editArtist(filteredArtists[0].id);\r\n      } else {\r\n        Modal.alert(\r\n          'No matching artists were found.',\r\n          'Search Results'\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  // Find an artist by field===value\r\n  function findArtistBy(fieldName, value) {\r\n    var valueString = '' + value;\r\n    return findArtist(function(a) {\r\n      return !!a[fieldName] &&\r\n        ('' + a[fieldName]) === valueString;\r\n    });\r\n  }\r\n\r\n  // Find an artist by badge number.\r\n  function findArtistByBadge() {\r\n    Modal.prompt(\r\n      'Enter badge number.',\r\n      'Find Artist by Badge Number',\r\n      function(badgeNumber) {\r\n        if (!!badgeNumber) {\r\n          findArtistBy('badgeNumber', badgeNumber);\r\n        }\r\n      });\r\n  }\r\n\r\n  // Find an artist by table number.\r\n  function findArtistByTable() {\r\n    Modal.prompt(\r\n      'Enter table number.',\r\n      'Find Artist by Table Number',\r\n      function(tableNumber) {\r\n        if (!!tableNumber) {\r\n          findArtistBy('tableNumber', tableNumber);\r\n        }\r\n      });\r\n  }\r\n\r\n  // Create new artists with rapid entry capability.\r\n  function newArtistRapidEntry() {\r\n    Modal.addArtist(true);\r\n  }\r\n\r\n  // Clear out all artists.\r\n  function resetDatabase() {\r\n    confirmAction(\r\n      'reset',\r\n      'Wipe Everything',\r\n      Artists.clear);\r\n  }\r\n\r\n  // Run the lottery for a given number of slots.\r\n  function runLottery() {\r\n    Modal.prompt(\r\n      'How many seats?',\r\n      'Run Lottery',\r\n      function(seats) {\r\n        if (seats) {\r\n          var slotsAvailable = +seats;\r\n          if (slotsAvailable > 0) {\r\n            Lottery.run(slotsAvailable);\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  // Save raw artist data.\r\n  function saveArtistRaw() {\r\n    try {\r\n      var artistId = +$('[data-select-raw]').find(':selected').attr('value');\r\n      if (artistId) {\r\n        var artist = JSON.parse($('[data-edit-raw]').val());\r\n        artist.id = artistId;\r\n        Artists.set(artist).then(function() {\r\n          Modal.alert('The artist was saved successfully.');\r\n        });\r\n      }\r\n    } catch (e) {\r\n      Modal.alert('The artist could not be saved:\\n' + e.message);\r\n    }\r\n  }\r\n\r\n  // Fill the database with mock data.\r\n  function seedDatabase() {\r\n    confirmAction(\r\n      'generate',\r\n      'Generate Test Data',\r\n      function() {\r\n        Artists.clear().then(function() {\r\n          var artists = [];\r\n          for (var i = 0; i < 200; i++) {\r\n            artists.push(Generator.getRandomArtist());\r\n          }\r\n          return Artists.setAll(artists);\r\n        });\r\n      });\r\n  }\r\n\r\n})(window);\r\n","/* globals Modal, Names, Scheduler, Screen, SystemActions */\r\n\r\n$(function() {\r\n  function InitializeFirstScreen() {\r\n    var screenId = window.location.hash.substring(1);\r\n    if (!screenId || screenId.length === 0) {\r\n      screenId = 'main';\r\n    }\r\n    Screen.select(screenId);\r\n  }\r\n\r\n  // Initialize the window handler which repositions content on resize.\r\n  function InitializeResizeHandler() {\r\n    $(window).resize(Screen.reposition);\r\n  }\r\n\r\n  // Initialize all links with the \"data-modal\" attribute so they pop up when\r\n  // activated.\r\n  function InitializeModalNavigation() {\r\n    $('a[data-modal]').each(function(i, e) {\r\n      var linkElement = $(e);\r\n      var modalId = linkElement.attr('data-modal');\r\n      linkElement\r\n        .attr('href', '#')\r\n        .click(function() {\r\n          Modal[modalId]();\r\n        });\r\n    });\r\n  }\r\n\r\n  // Initialize all links with the \"data-screen\" attribute so they switch\r\n  // screens when clicked.\r\n  function InitializeScreenNavigation() {\r\n    $('a[data-screen]').each(function(i, e) {\r\n      var linkElement = $(e);\r\n      var screenId = linkElement.attr('data-screen');\r\n      linkElement\r\n        .attr('href', '#' + screenId)\r\n        .click(function() {\r\n          Screen.select(screenId);\r\n        });\r\n    });\r\n  }\r\n\r\n  // Initialize links with system actions.\r\n  function InitializeSystemActions() {\r\n    $('[data-system-action]').each(function(i, e) {\r\n      var linkElement = $(e);\r\n      var action = linkElement.attr('data-system-action');\r\n      linkElement\r\n        .click(function() {\r\n          SystemActions[action]();\r\n        });\r\n    });\r\n  }\r\n\r\n  // Initialization.\r\n  InitializeModalNavigation();\r\n  InitializeScreenNavigation();\r\n  InitializeFirstScreen();\r\n  InitializeResizeHandler();\r\n  InitializeSystemActions();\r\n\r\n  // Hook events.\r\n  Scheduler.onArtistChange(Names.populate);\r\n\r\n  // This fixes layered modals. Courtesy of:\r\n  // http://gurde.com/stacked-bootstrap-modals/\r\n  $(function() {\r\n    $(document)\r\n      .on('show.bs.modal', '.modal', function() {\r\n        $(this).appendTo($('body'));\r\n      })\r\n      .on('shown.bs.modal', '.modal.in', function() {\r\n        setModalsAndBackdropsOrder();\r\n      })\r\n      .on('hidden.bs.modal', '.modal', function() {\r\n        setModalsAndBackdropsOrder();\r\n        if ($('.modal.in').length === 0) {\r\n          $('body').removeClass('modal-open');\r\n        }\r\n      });\r\n\r\n    function setModalsAndBackdropsOrder() {\r\n      $('body').addClass('modal-open');\r\n      var modalZIndex = $('.modal.in').length + 1050 + 1;\r\n      var backdropZIndex = modalZIndex - 1;\r\n      $('.modal-backdrop').addClass('hidden');\r\n      $('.modal.in:last').css('z-index', modalZIndex);\r\n      $('.modal-backdrop.in:last').css('z-index', backdropZIndex).removeClass('hidden');\r\n    }\r\n  });\r\n});\r\n","$(function() {\r\n  JoelPurra.PlusAsTab.setOptions({\r\n    key: 13\r\n  });\r\n\r\n  $(document).on('shown.bs.modal', '.modal', function() {\r\n    $(this).find('[autofocus]').focus();\r\n  });\r\n});\r\n"],"sourceRoot":"/source/"}